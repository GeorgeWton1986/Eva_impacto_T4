#Limpiar la consola
cat("\f")
#Limpiar el Global Environment
rm(list = ls())
#Incluir las librerias
if(!require(pacman)) install.packages("pacman") ; require(pacman)
p_load(haven,   #Leer archivos .dta
dplyr,    #Manipular datos
stargazer,  #Visualizar tablas de regresión
fixest,   #Calcular los efectos fijos
plm,  #Datos de panel
knitr,   #Visualizar tablas adicionales
ivreg,  #Regresiones por variables instrumentales
broom, #Extraer resultados de regresiones
AER,    #Regresiones por variables instrumentales
sandwich, #Errores estándar robustos
lmtest,  #Pruebas estadísticas
kableExtra #Tablas avanzadas
)
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T4/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/SoapOperas2.dta"))
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T4/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/SoapOperas2.dta"))
# Ver estructura de los datos
#glimpse(BD_0)
#head(BD_0)
# Verificar los nombres de la columnas
colnames(BD_0)
View(BD_0)
#Limpiar la consola
cat("\f")
#Limpiar el Global Environment
rm(list = ls())
#Incluir las librerias
if(!require(pacman)) install.packages("pacman") ; require(pacman)
p_load(haven,   #Leer archivos .dta
dplyr,    #Manipular datos
stargazer,  #Visualizar tablas de regresión
fixest,   #Calcular los efectos fijos
plm,  #Datos de panel
knitr,   #Visualizar tablas adicionales
ivreg,  #Regresiones por variables instrumentales
broom, #Extraer resultados de regresiones
AER,    #Regresiones por variables instrumentales
sandwich, #Errores estándar robustos
lmtest,  #Pruebas estadísticas
kableExtra #Tablas avanzadas
)
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T4/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/SoapOperas2.dta"))
# Ver estructura de los datos
#glimpse(BD_0)
#head(BD_0)
# Verificar los nombres de la columnas
colnames(BD_0)
# Incluir la semilla con mi código de estudiante
set.seed(202415176)
# Eliminar aleatoriamente el 5% de las observaciones
BD_1 <- BD_0 %>% sample_frac(0.95)
# Restringir el tamaño del área hasta el percentil 95
percentil_95 <- quantile(BD_1$geoarea80, 0.95, na.rm = TRUE)
BD_1 <- BD_1 %>% filter(geoarea80 <= percentil_95)
# Modelo 1: Sin controles y sin efectos fijos de área
mod_1 <- feols(birth ~ globocoverage1 + factor(year) ,
data = BD_1,
weights = ~weight,
cluster = ~amc_code)
# Modelo 1: Sin controles y sin efectos fijos de área
mod_1 <- feols(birth ~ globocoverage1 | year,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 1: Sin controles y sin efectos fijos de área
mod_1 <- feols(B ~ globocoverage1 | year,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 1: Sin controles y sin efectos fijos de área
mod_1 <- feols(B ~ globocoverage1 | year,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 2: Sin controles, pero con efectos fijos de área (amc_code)
mod_2 <- feols(B ~ globocoverage1 | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 1: Sin controles y sin efectos fijos de área
mod_1 <- feols(B ~ globocoverage1 | year,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 2: Sin controles, pero con efectos fijos de área (amc_code)
mod_2 <- feols(B ~ globocoverage1 | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 3: Con controles y con efectos fijos de área
mod_3 <- feols(B ~ globocoverage1 + rural + catholic + yrs_edu + married +
yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 1: Sin controles y sin efectos fijos de área
mod_1 <- feols(B ~ globocoverage1 | year,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 2: Sin controles, pero con efectos fijos de área (amc_code)
mod_2 <- feols(B ~ globocoverage1 | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 3: Con controles y con efectos fijos de área
mod_3 <- feols(B ~ globocoverage1 + rural + catholic + yrs_edu + married +
yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Resultado de los modelos
etable(mod_1, mod_2, mod_3,
title = "Efecto de la Cobertura de Globo en la Probabilidad de Dar a Luz",
headers = c("Modelo 1", "Modelo 2", "Modelo 3"),
keep = "globocoverage1",
digits = 4)
# Modelo 1: Sin controles y sin efectos fijos de área
mod_1 <- feols(B ~ globocoverage1 | year,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 2: Sin controles, pero con efectos fijos de área (amc_code)
mod_2 <- feols(B ~ globocoverage1 | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 3: Con controles y con efectos fijos de área
mod_3 <- feols(B ~ globocoverage1 + rural + catholic + yrs_edu + married +
yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Resultado de los modelos
etable(mod_1, mod_2, mod_3,
title = "Efecto de la Cobertura de Globo en la Probabilidad de nacimientos",
headers = c("Modelo 1", "Modelo 2", "Modelo 3"),
keep = "globocoverage1",
digits = 4)
# Modelo 1: Sin controles y sin efectos fijos de área
mod_1 <- feols(B ~ globocoverage1 | year,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 2: Sin controles, pero con efectos fijos de área (amc_code)
mod_2 <- feols(B ~ globocoverage1 | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Modelo 3: Con controles y con efectos fijos de área
mod_3 <- feols(B ~ globocoverage1 + rural + catholic + yrs_edu + married +
yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
# Resultado de los modelos
etable(mod_1, mod_2, mod_3,
title = "Efecto de la Cobertura de Globo en la Probabilidad de nacimientos",
headers = c("Modelo 1", "Modelo 2", "Modelo 3"),
keep = "globocoverage1",
digits = 4)
# Filtrar los datos por rangos de edad
BD_15_24 <- BD_1 %>% filter(age >= 15 & age <= 24)
BD_25_34 <- BD_1 %>% filter(age >= 25 & age <= 34)
BD_35_44 <- BD_1 %>% filter(age >= 35 & age <= 44)
# Modelos con restricción de edad
mod_3_1 <- feols(B ~ globocoverage1 + rural + catholic + yrs_edu + married +
yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_15_24,
weights = BD_15_24$weight,
cluster = "amc_code")
mod_3_2 <- feols(B ~ globocoverage1 + rural + catholic + yrs_edu + married +
yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_25_34,
weights = BD_25_34$weight,
cluster = "amc_code")
mod_3_2 <- feols(B ~ globocoverage1 + rural + catholic + yrs_edu + married +
yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_35_44,
weights = BD_35_44$weight,
cluster = "amc_code")
etable(mod_3_1, mod_3_2, mod_3_2,
title = "Efecto de la Cobertura de Globo en la Probabilidad de nacimientos por Rangos de Edad",
headers = c("Modelo 15-24", "Modelo 25-34", "Modelo 35-44"),
keep = "globocoverage1",
digits = 4)
# Modelo con efectos heterogéneos
mod_het <- feols(B ~ globocoverage1 + globocoverage1: yrs_edu +rural + catholic + yrs_edu +
married + yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
summary(mod_het)
# Modelo con efectos heterogéneos
mod_het <- feols(B ~ globocoverage1 + globocoverage1*yrs_edu +rural + catholic + yrs_edu +
married + yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
summary(mod_het)
# Modelo con efectos heterogéneos
mod_het <- feols(B ~ globocoverage1 + globocoverage1*yrs_edu +rural + catholic + yrs_edu +
married + yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
summary(mod_het, 14)
# Modelo con efectos heterogéneos
mod_het <- feols(B ~ globocoverage1 + globocoverage1*yrs_edu +rural + catholic + yrs_edu +
married + yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
summary(mod_het)
# Modelo con efectos heterogéneos
mod_het <- feols(B ~ globocoverage1 + globocoverage1*yrs_edu +rural + catholic + yrs_edu +
married + yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
etable(mod_het,
title = "Efecto de la Cobertura de Globo en la Probabilidad de nacimientos con Efectos Heterogéneos por Años de Educación de la mujer",
keep = c("globocoverage1", "globocoverage1:yrs_edu"),
digits = 4)
# Modelo con efectos heterogéneos
mod_het <- feols(B ~ globocoverage1 + globocoverage1*yrs_edu +rural + catholic + yrs_edu +
married + yrsedu_head + age + stock + ipc_renta + wealth_noTV + Doctors +
agesq + stocksq | year + amc_code,
data = BD_1,
weights = BD_1$weight,
cluster = "amc_code")
etable(mod_het,
title = "Efecto Globo en la Probabilidad de nacimientos con Efectos Heterogéneos por Años de Educación de la mujer",
keep = c("globocoverage1", "globocoverage1:yrs_edu"),
digits = 4)
